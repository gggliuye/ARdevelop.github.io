<html>
	<head>
		<meta charset="UTF-8">
		<title>My mesh ply app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body onload="draw();">
	<body bgcolor="white">
		<script src="build/three.js"></script>
		<script src="build/PLYLoader.js"></script>
		<script src="build/OrbitControls.js"></script>
		<script src="build/stats.min.js"></script>
		<script src="build/dat.gui.min.js"></script>
		<script>
			var renderer;
    			function initRender() {
        			renderer = new THREE.WebGLRenderer({antialias:true});
        			renderer.setSize(window.innerWidth, window.innerHeight);
        			renderer.setClearColor(0xffffff);
        			document.body.appendChild(renderer.domElement);
    			}

    			var camera;
    			function initCamera() {
        			camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000);
        			camera.position.set(0, 40, 50);
        			camera.lookAt(new THREE.Vector3(0,0,0));
  			}

    			var scene;
    			function initScene() {
        			scene = new THREE.Scene();
    			}

    			var gui;
    			function initGui() {
        			gui = {
        			};
        			var datGui = new dat.GUI();
    			}

    			var light;
    			function initLight() {
        			scene.add(new THREE.AmbientLight(0x444444));
       				light = new THREE.PointLight(0xffffff);
        			light.position.set(0,50,50);
        			light.castShadow = true;
        			scene.add(light);
    			}

    			function initModel() {
        			var helper = new THREE.AxesHelper(50);
        			scene.add(helper);

        			var loader = new THREE.PLYLoader();
        			loader.load("../resources/rgbd_utopa_go_res_05.ply", function (geometry) {
            			geometry.computeVertexNormals();

            			var material = new THREE.MeshStandardMaterial( { color: 0x0055ff, flatShading: true } );
            			var mesh = new THREE.Mesh( geometry, material );
           			 mesh.rotation.y = Math.PI;
            			mesh.scale.set(0.05, 0.05, 0.05);
            			scene.add( mesh );
        			});
   			}

    			var stats;
    			function initStats() {
        			stats = new Stats();
        			document.body.appendChild(stats.dom);
    			}

    			var controls;
    			function initControls() {
        			controls = new THREE.OrbitControls( camera, renderer.domElement );
        			controls.enableDamping = true;
        			controls.enableZoom = true;
        			controls.autoRotate = true;
        			controls.autoRotateSpeed = 0.5;
        			controls.minDistance  = 1;
        			controls.maxDistance  = 200;
        			controls.enablePan = true;
    			}

    			function render() {
        			renderer.render( scene, camera );
   			}

    			function onWindowResize() {
        			camera.aspect = window.innerWidth / window.innerHeight;
        			camera.updateProjectionMatrix();
        			render();
        			renderer.setSize( window.innerWidth, window.innerHeight );
    			}

    			function animate() {
        			render();
        			stats.update();
        			controls.update();
       				requestAnimationFrame(animate);
    			}

    			function draw() {
        			initGui();
        			initRender();
        			initScene();
        			initCamera();
        			initLight();
       			 	initModel();
        			initControls();
        			initStats();

        			animate();
        			window.onresize = onWindowResize;
    			}
		</script>
	</body>
</html>
